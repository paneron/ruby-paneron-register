= Paneron Register Ruby Gem

image:https://img.shields.io/gem/v/paneron-register.svg["Gem Version", link="https://rubygems.org/gems/paneron-register"]
image:https://github.com/paneron/ruby-paneron-register/actions/workflows/test.yaml/badge.svg["Build Status",Link="https://github.com/paneron/ruby-paneron-register/actions/workflows/test.yaml"]
image:https://codeclimate.com/github/paneron/ruby-paneron-register/badges/gpa.svg["Code Climate", link="https://codeclimate.com/github/paneron/ruby-paneron-register"]
image:https://img.shields.io/github/issues-pr-raw/paneron/ruby-paneron-register.svg["Pull Requests", link="https://github.com/paneron/ruby-paneron-register/pulls"]
image:https://img.shields.io/github/commits-since/paneron/ruby-paneron-register/latest.svg["Commits since latest",link="https://github.com/paneron/ruby-paneron-register/releases"]


== Installation

```sh
gem install paneron-register
```

== Usage

```ruby
require "paneron/register"

# Initialize a new data set
# This example uses a working copy of Paneron's data set.
# => Paneron::Register::Raw::DataSet
raw_data_set = Paneron::Register::Raw::DataSet.new(
  "/Users/username/Library/Application Support/Electron/working_copies/00000000-0001-0000-0000-000000000001",
  "data_set_name-1"
)

# => Paneron::Register::DataSet < Lutaml::Model::Serializable
data_set = raw_data_set.to_lutaml

# Alternatively, initialize a new register:
# => Paneron::Register::Raw::Register
raw_register = Paneron::Register::Raw::Register.new(
  "/Users/username/Library/Application Support/Electron/working_copies/00000000-0001-0000-0000-000000000001",
)

# This example uses a Git URL
# => Paneron::Register::Raw::Register
raw_register = Paneron::Register::Raw::Register.from_git(
  "https://github.com/isogr/registry",

  # optional.  For previously cloned repos, pulls from repo iff true.
  # update: true,
)

# => Paneron::Register::Raw::DataSet
raw_data_set = raw_register.data_sets("data_set_name-1")

# => Paneron::Register::DataSet < Lutaml::Model::Serializable
data_set = raw_data_set.to_lutaml

# Get all item class objects
# => { item-class-name: Paneron::Register::Raw::ItemClass }
raw_data_set.item_classes

# => [ Paneron::Register::ItemClass ]
data_set.item_classes

# Get a specific item class object
# => Paneron::Register::Raw::ItemClass
raw_item_class = raw_data_set.item_classes("item-class-1")

# => Paneron::Register::ItemClass < Lutaml::Model::Serializable
item_class = raw_item_class.to_lutaml

# Get all item objects in Ruby Hash format
# => { item-uuid: Paneron::Register::Raw::Item }
raw_item_class.items

# => [ Paneron::Register::Item ]
item_class.items

# Get a specific item property, using normal Ruby Hash methods
# => Paneron::Register::Raw::Item
raw_item = raw_item_class.items["00000000-0000-0000-0000-000000000001"]
id = raw_item["id"]
blob1 = raw_item["data"]["blob1"]

# Get a specific item property, from a Lutaml object
# => Paneron::Register::Item < Lutaml::Model::Serializable
item = raw_item.to_lutaml
id = item.to_h["id"]
blob1 = item.to_h["data"]["blob1"]
```

== License

See LICENSE.txt
